window.__require=function t(e,n,o){function r(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=n[a]={exports:{}};e[a][0].call(p.exports,function(t){return r(e[a][1][t]||t)},p,p.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)r(o[a]);return r}({AppUtil:[function(t,e,n){"use strict";cc._RF.push(e,"fa7eec6JC9NYZ/lCKCOQGNb","AppUtil");var o=this&&this.__awaiter||function(t,e,n,o){function r(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):r(t.value).then(a,c)}s((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.AppUtil=n.UiUtil=n.CardUtil=void 0;var i=t("./unit"),a=t("./SocketDataHandler/DataSchema"),c=function(){function t(){}return t.newCard=function(t,e,n,o,r){var a=cc.instantiate(t);return a.getComponent(i.default).index=n,a.getComponent(i.default).player=o,a.getComponent(i.default).isStacked=r,a.getComponent(i.default).set(e),a},t.sortCards=function(t,e){this.sortCardIdList(t);for(var n=0;n<t.length;n++)e[n].set(t[n])},t.sortCardIdList=function(t){t.sort(function(t,e){return t-e})},t}();n.CardUtil=c;var s=function(){function t(){}return t.initAvailableInteractions=function(t){var e=[];return t.CanEat&&e.push(a.ActionId.Chow),t.CanPong&&e.push(a.ActionId.Pong),t.CanKong&&e.push(a.ActionId.ExposedKong),t.CanKong&&e.push(a.ActionId.ConcealedKong),t.CanKong&&e.push(a.ActionId.AddKong),t.CanMing&&e.push(a.ActionId.Ming),t.CanCrit&&e.push(a.ActionId.Crit),e.push(a.ActionId.Ting),e.push(a.ActionId.Hu),e.push(a.ActionId.SelfHu),e.push(a.ActionId.Buhua),e},t}();n.UiUtil=s;var u=function(){function t(){}return t.sleep=function(t){return o(this,void 0,Promise,function(){return r(this,function(e){return[2,new Promise(function(e,n){setTimeout(e,t)})]})})},t}();n.AppUtil=u,cc._RF.pop()},{"./SocketDataHandler/DataSchema":"DataSchema","./unit":"unit"}],ChangeThreeTileMenu:[function(t,e,n){"use strict";cc._RF.push(e,"b01abDKwzhCdZnW8NMdbt9Z","ChangeThreeTileMenu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.decideButton=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},r([c(cc.Button)],e.prototype,"decideButton",void 0),e=r([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],ClientDataCreator:[function(t,e,n){"use strict";cc._RF.push(e,"cc323+SXuhK8Y+/4GbqaaSB","ClientDataCreator"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./DataSchema"),r=function(){function t(){}return t.createConnectionData=function(){var t=new o.Command;return t.Command=o.CommandId[o.CommandId.Connect],JSON.stringify(t)},t.createCreateRoomData=function(t,e){var n=new o.ClientData;n.UserId=t,n.GameRule=e;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.Createroom],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createDealTilesData=function(){var t=new o.Command;return t.Command=o.CommandId[o.CommandId.DealTiles],JSON.stringify(t)},t.createOpenGameData=function(){var t=new o.Command;return t.Command=o.CommandId[o.CommandId.OpenGame],JSON.stringify(t)},t.createSelectWithoutData=function(t,e){var n=new o.ClientData;n.Player=e,n.Tiles=t;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.WithoutTiles],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createChangeThreeTilesData=function(t,e){var n=new o.ClientData;n.Player=e,n.Tiles=t;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.ChangeTiles],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createChowData=function(t,e){var n=new o.ClientData;n.Action=o.ActionId[o.ActionId.Chow],n.Player=e,n.Tiles=t;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.Action],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createPongData=function(t,e){var n=new o.ClientData;n.Action=o.ActionId[o.ActionId.Pong],n.Player=e,n.Tiles=t;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.Action],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createKongData=function(t,e){var n=new o.ClientData;n.Action=o.ActionId[o.ActionId.ExposedKong],n.Player=e,n.Tiles=t;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.Action],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createConcealedKongData=function(t,e){var n=new o.ClientData;n.Action=o.ActionId[o.ActionId.ConcealedKong],n.Player=e,n.Tiles=t;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.Action],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createAddKongData=function(t,e){var n=new o.ClientData;n.Action=o.ActionId[o.ActionId.AddKong],n.Player=e,n.Tiles=t;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.Action],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createDiscardTileData=function(t,e,n){var r=new o.ClientData;r.UserId=t,r.Player=e,r.DiscardTile=n;var i=new o.Command;return i.Command=o.CommandId[o.CommandId.DiscardTile],i.Data=JSON.stringify(r),JSON.stringify(i)},t.createNothingData=function(t){var e=new o.ClientData;e.Action=o.ActionId[o.ActionId.Nothing],e.Player=t;var n=new o.Command;return n.Command=o.CommandId[o.CommandId.Action],n.Data=JSON.stringify(e),JSON.stringify(n)},t.createAIDiscardTileData=function(t,e){var n=new o.ClientData;n.UserId=t,n.Player=e;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.AIDiscardTile],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createAITestData=function(t,e){var n=new o.ClientData;n.Rounds=t,n.GameRule=e;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.AITest],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createHuData=function(t,e){var n=new o.ClientData;n.Action=o.ActionId[o.ActionId.Hu],n.Player=e,n.Tiles=t;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.Action],r.Data=JSON.stringify(n),JSON.stringify(r)},t.createSelfHuData=function(t,e){var n=new o.ClientData;n.Action=o.ActionId[o.ActionId.SelfHu],n.Player=e,n.Tiles=t;var r=new o.Command;return r.Command=o.CommandId[o.CommandId.Action],r.Data=JSON.stringify(n),JSON.stringify(r)},t}();n.default=r,cc._RF.pop()},{"./DataSchema":"DataSchema"}],DataSchema:[function(t,e,n){"use strict";var o;cc._RF.push(e,"9c8859zqRNDxLgjj6OyrcgI","DataSchema"),Object.defineProperty(n,"__esModule",{value:!0}),n.PlayerData=n.DoActionData=n.GameRule=n.ServerData=n.ClientData=n.Command=n.GameState=n.ActionId=n.CommandId=void 0,function(t){t[t.Connect=0]="Connect",t[t.Createroom=1]="Createroom",t[t.DealTiles=2]="DealTiles",t[t.ChangeTiles=3]="ChangeTiles",t[t.WithoutTiles=4]="WithoutTiles",t[t.OpenGame=5]="OpenGame",t[t.DiscardTile=6]="DiscardTile",t[t.Action=7]="Action",t[t.AIDiscardTile=8]="AIDiscardTile",t[t.AITest=9]="AITest"}(n.CommandId||(n.CommandId={})),function(t){t[t.Chow=0]="Chow",t[t.Pong=1]="Pong",t[t.ExposedKong=2]="ExposedKong",t[t.ConcealedKong=3]="ConcealedKong",t[t.AddKong=4]="AddKong",t[t.Hu=5]="Hu",t[t.SelfHu=6]="SelfHu",t[t.Nothing=7]="Nothing",t[t.DiscardTile=8]="DiscardTile",t[t.Buhua=9]="Buhua",t[t.ChangeThreeTiles=10]="ChangeThreeTiles",t[t.SelectWithout=11]="SelectWithout",t[t.Ming=12]="Ming",t[t.Ting=13]="Ting",t[t.Crit=14]="Crit"}(n.ActionId||(n.ActionId={})),function(t){t[t.StateCreateRoom=0]="StateCreateRoom",t[t.StateDealTiles=1]="StateDealTiles",t[t.StateChangeTiles=2]="StateChangeTiles",t[t.StateWithoutTiles=3]="StateWithoutTiles",t[t.StateBuHua=4]="StateBuHua",t[t.StateOpenGame=5]="StateOpenGame",t[t.StateDraw=6]="StateDraw",t[t.StateAction=7]="StateAction",t[t.StateDiscard=8]="StateDiscard",t[t.StateGameOver=9]="StateGameOver"}(o=n.GameState||(n.GameState={}));var r=function(){return function(){}}();n.Command=r;var i=function(){return function(){}}();n.ClientData=i;var a=function(){function t(){}return t.prototype.isGameInit=function(){return this.GameState==o.StateDealTiles},t.prototype.isPreGameStage=function(){return this.GameState==o.StateChangeTiles||this.GameState==o.StateWithoutTiles},t.prototype.isGameOver=function(){return this.GameState==o.StateGameOver},t.prototype.isUserPlayerThrow=function(){return this.PlayerNow==this.RealPlayer},t.prototype.isDiscardTile=function(){return this.GameState==o.StateDiscard},t}();n.ServerData=a;var c=function(){return function(){}}();n.GameRule=c;var s=function(){return function(){}}();n.DoActionData=s;var u=function(){return function(){}}();n.PlayerData=u,cc._RF.pop()},{}],GameOverMenu:[function(t,e,n){"use strict";cc._RF.push(e,"182d2Bxa31EmYAm14oXCiU/","GameOverMenu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.info=null,e}return o(e,t),e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.start=function(){},r([c(cc.Label)],e.prototype,"info",void 0),e=r([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],InteractionMenu:[function(t,e,n){"use strict";cc._RF.push(e,"bb12a3itItHpJ4NqDOim35a","InteractionMenu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./SocketDataHandler/DataSchema"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonCache=new Map,e}return o(e,t),e.prototype.init=function(){null==this.exampleOption&&(this.exampleOption=this.node.getChildByName("example_option")),null==this.exampleCancel&&(this.exampleCancel=this.node.getChildByName("example_cancel"))},e.prototype.initButtons=function(t){this.init();for(var e=0;e<t.length;e++){var n=t[e];this.buttonCache.set(n,this.createButtonById(n))}console.log("available buttons = ",this.buttonCache)},e.prototype.createButtonById=function(t){switch(t){case i.ActionId.Chow:return this.createChowButton();case i.ActionId.Pong:return this.createPongButton();case i.ActionId.ExposedKong:return this.createKongButton();case i.ActionId.ConcealedKong:return this.createConcealedKongButton();case i.ActionId.AddKong:return this.createAddKongButton();case i.ActionId.Ting:return this.createTinButton();case i.ActionId.Hu:return this.createHuButton();case i.ActionId.SelfHu:return this.createSelfHuButton();case i.ActionId.Ming:return this.createMingButton();case i.ActionId.Crit:return this.createCritButton()}return null},e.prototype.editButtonLabel=function(t,e){t.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=e},e.prototype.editButtonClickEvent=function(t,e){t.getComponent(cc.Button).clickEvents[0].handler=e},e.prototype.createChowButton=function(){return this.createButton("\u5403","interactionButtonChow")},e.prototype.createPongButton=function(){return this.createButton("\u78b0","interactionButtonPong")},e.prototype.createKongButton=function(){return this.createButton("\u69d3","interactionButtonKong")},e.prototype.createConcealedKongButton=function(){return this.createButton("\u6697\u69d3","interactionButtonConcealedKong")},e.prototype.createAddKongButton=function(){return this.createButton("\u52a0\u69d3","interactionButtonAddKong")},e.prototype.createTinButton=function(){return this.createButton("\u807d\u724c","interactionButtonTin")},e.prototype.createHuButton=function(){return this.createButton("\u80e1","interactionButtonHu")},e.prototype.createSelfHuButton=function(){return this.createButton("\u81ea\u6478","interactionButtonSelfHu")},e.prototype.createCritButton=function(){return this.createButton("\u7206\u64ca","interactionButtonCrit")},e.prototype.createMingButton=function(){return this.createButton("\u660e\u724c","interactionButtonMing")},e.prototype.createAddFlowerButton=function(){return this.createButton("\u88dc\u82b1","interactionButtonAddFlower")},e.prototype.createButton=function(t,e){var n=cc.instantiate(this.exampleOption);return this.editButtonLabel(n,t),this.editButtonClickEvent(n,e),this.node.addChild(n),n},e.prototype.showByIndex=function(t,e){if(0!=t.length){this.node.removeAllChildren();for(var n=0;n<t.length;n++)this.node.addChild(this.buttonCache.get(t[n]));e&&this.node.addChild(this.exampleCancel),this.show()}},e.prototype.start=function(){},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e=r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./SocketDataHandler/DataSchema":"DataSchema"}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"33af6WPNtdNKZBvq2mB5OGp","Player");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./cardZone"),a=t("./drawZone"),c=t("./stackZone"),s=t("./dropZone"),u=t("./flowerZone"),p=t("./SocketDataHandler/ClientDataCreator"),l=t("./game"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.DRAW_CARD_INDEX=999,e.prefab=null,e.cardZone=null,e.drawZone=null,e.dropZone=null,e.stackZone=null,e.flowerZone=null,e.playerIndex=0,e.isInteractable=!1,e.point=0,e.playerServerIndex=-1,e.playerId=null,e.pickUnitIndex=-1,e.without=0,e.webSocket=null,e.pickMultipleCardLimit=-1,e.pickMultiCardIndex=[],e}return o(e,t),e.prototype.setCardZone=function(t){this.cardZone.setCards(t)},e.prototype.setFlowers=function(t){this.flowerZone.setCards(t)},e.prototype.pick=function(t){-1!=t&&(this.isPickMultipleCards()?this.handleMutiPick(t):this.isCardPicked(t)?this.handlePickedCard(t):t!=this.DRAW_CARD_INDEX?this.pickCardZone(t):this.pickDrawCard())},e.prototype.handleMutiPick=function(t){var e=this.pickMultiCardIndex.indexOf(t,0);e>-1?this.pickMultiCardIndex.splice(e,1):this.pickMultiCardIndex.push(t),this.pickMultiCardIndex.length>this.pickMultipleCardLimit&&this.pickMultiCardIndex.shift(),this.cardZone.unPickAll();for(var n=0;n<this.pickMultiCardIndex.length;n++)this.cardZone.pick(this.pickMultiCardIndex[n]);this.cardZone.node.parent.parent.parent.getComponent(l.default).changeThreeTileMenu.decideButton.interactable=this.isReachMaxMultiCardLimit()},e.prototype.handlePickedCard=function(t){this.cardZone.node.parent.parent.parent.getComponent(l.default).interactionMenu.hide(),this.sleep(),this.pickUnitIndex=-1,this.webSocket.send(p.default.createDiscardTileData(this.playerId,this.playerServerIndex,this.findPickedCardId(t))),this.webSocket.send(p.default.createNothingData(this.playerServerIndex))},e.prototype.getMultiPickedCards=function(){for(var t=[],e=0;e<this.pickMultiCardIndex.length;e++)t.push(this.cardZone.unitsIdList[this.pickMultiCardIndex[e]]);return t},e.prototype.pickDrawCard=function(){this.drawZone.pick(),this.pickUnitIndex!=this.DRAW_CARD_INDEX&&this.cardZone.unPickAll()},e.prototype.pickCardZone=function(t){this.cardZone.unPickAll(),this.cardZone.pick(t),this.drawZone.unpick(),this.pickUnitIndex=t},e.prototype.isCardPicked=function(t){return t==this.DRAW_CARD_INDEX?this.drawZone.drawUnit.isPicked:this.cardZone.units[t].isPicked},e.prototype.findPickedCardId=function(t){return t==this.DRAW_CARD_INDEX?this.drawZone.drawUnit.ID:this.cardZone.unitsIdList[t]},e.prototype.isPickMultipleCards=function(){return-1!=this.pickMultipleCardLimit},e.prototype.isReachMaxMultiCardLimit=function(){return this.pickMultiCardIndex.length==this.pickMultipleCardLimit},e.prototype.throwCard=function(){if(null!=this.drawZone.drawUnit&&99!=this.drawZone.drawUnit.ID){var t=this.drawZone.remove();this.dropZone.addToDrop(t)}},e.prototype.refreshCardZone=function(t,e){this.drawZone.remove(),this.cardZone.setCards(e),this.dropZone.setCards(t,!0)},e.prototype.draw=function(t){this.drawZone.drawNewCard(t)},e.prototype.chow=function(t,e){this.stackZone.addChow(t),this.cardZone.setCards(e)},e.prototype.pong=function(t,e){this.stackZone.addPong(t),this.cardZone.setCards(e)},e.prototype.kong=function(t,e){this.stackZone.addKong(t),this.cardZone.setCards(e)},e.prototype.addKong=function(t,e){this.stackZone.removePong(t),this.kong(t,e)},e.prototype.wakeUp=function(){this.isInteractable=!0},e.prototype.sleep=function(){this.pickUnitIndex=-1,this.pickMultipleCardLimit=-1,this.cardZone.unPickAll(),this.isInteractable=!1},r([f(cc.Prefab)],e.prototype,"prefab",void 0),r([f(i.default)],e.prototype,"cardZone",void 0),r([f(a.default)],e.prototype,"drawZone",void 0),r([f(s.default)],e.prototype,"dropZone",void 0),r([f(c.default)],e.prototype,"stackZone",void 0),r([f(u.default)],e.prototype,"flowerZone",void 0),r([f],e.prototype,"playerIndex",void 0),r([f],e.prototype,"isInteractable",void 0),e=r([h],e)}(cc.Component);n.default=y,cc._RF.pop()},{"./SocketDataHandler/ClientDataCreator":"ClientDataCreator","./cardZone":"cardZone","./drawZone":"drawZone","./dropZone":"dropZone","./flowerZone":"flowerZone","./game":"game","./stackZone":"stackZone"}],SelectChowMenu:[function(t,e,n){"use strict";cc._RF.push(e,"53e22joIjNCM6CGTfMiB6KN","SelectChowMenu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./unit"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chiOptions=[],e}return o(e,t),e.prototype.init=function(){null==this.exampleChiOption&&(this.exampleChiOption=this.node.getChildByName("example_chow_option")),null==this.exampleCancel&&(this.exampleCancel=this.node.getChildByName("example_cancel"))},e.prototype.showChowOptions=function(t){this.init(),this.node.removeAllChildren();for(var e=0;e<t.length;e++){var n=cc.instantiate(this.exampleChiOption);n.getComponent(cc.Button).clickEvents[0].customEventData=e.toString(),this.editChowOption(n,t[e]),this.node.addChild(n)}this.node.addChild(this.exampleCancel),this.show()},e.prototype.editChowOption=function(t,e){for(var n=t.getChildByName("chi_option").children,o=0;o<n.length;o++)n[o].getComponent(i.default).set(e[o])},e.prototype.start=function(){},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e=r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./unit":"unit"}],SelectKongMenu:[function(t,e,n){"use strict";cc._RF.push(e,"dc0d20l5UlMIZDiQKCCCERC","SelectKongMenu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./unit"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chiOptions=[],e}return o(e,t),e.prototype.init=function(){null==this.exampleKongOption&&(this.exampleKongOption=this.node.getChildByName("example_kong_option")),null==this.exampleCancel&&(this.exampleCancel=this.node.getChildByName("example_cancel"))},e.prototype.showKongOptions=function(t,e){this.init(),this.node.removeAllChildren();for(var n=0;n<t.length;n++){var o=cc.instantiate(this.exampleKongOption);this.bindKongEvent(o,e,String(n)),this.editKongOption(o,t[n]),this.node.addChild(o)}this.node.addChild(this.exampleCancel),this.show()},e.prototype.getKongFunctionName=function(t){return t?"concealedKongOption":"kongOption"},e.prototype.bindKongEvent=function(t,e,n){t.getComponent(cc.Button).clickEvents[0].handler=this.getKongFunctionName(e),t.getComponent(cc.Button).clickEvents[0].customEventData=n},e.prototype.editKongOption=function(t,e){for(var n=t.getChildByName("kong_option").children,o=0;o<n.length;o++)n[o].getComponent(i.default).set(e[o])},e.prototype.start=function(){},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e=r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./unit":"unit"}],SelectWithoutMenu:[function(t,e,n){"use strict";cc._RF.push(e,"36a04PClOBJZpWzfonNrRlL","SelectWithoutMenu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e=r([a],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],ServerDataResolver:[function(t,e,n){"use strict";cc._RF.push(e,"e8d08Hu+35LKLozTgj5YU86","ServerDataResolver"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./DataSchema"),r=function(){function t(){}return t.getServerData=function(t){var e=new o.ServerData,n=t.Data;return null==n?e:Object.assign(e,n)},t}();n.default=r,cc._RF.pop()},{"./DataSchema":"DataSchema"}],SettlementMenu:[function(t,e,n){"use strict";cc._RF.push(e,"b487bok1h5I7oBxWog+zSRY","SettlementMenu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./SettlementZone"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.settlementZones=[],e}return o(e,t),e.prototype.settles=function(t,e){for(var n=0;n<this.settlementZones.length;n++){var o=t[n],r=e[o.playerServerIndex],i=null==r.CanHuFaanListStr?"":r.CanHuFaanListStr.join(",");this.settlementZones[n].setContent(o.playerId,o.point.toString(),i)}},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.start=function(){},r([s(i.default)],e.prototype,"settlementZones",void 0),e=r([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./SettlementZone":"SettlementZone"}],SettlementZone:[function(t,e,n){"use strict";cc._RF.push(e,"d3befhGSYtKbZnu5jmbt4nW","SettlementZone");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerId=null,e.point=null,e.fanns=null,e}return o(e,t),e.prototype.setContent=function(t,e,n){this.playerId.string=t,this.point.string=e,this.fanns.string=n},e.prototype.start=function(){},r([c(cc.Label)],e.prototype,"playerId",void 0),r([c(cc.Label)],e.prototype,"point",void 0),r([c(cc.Label)],e.prototype,"fanns",void 0),e=r([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],TurnDirectionMenu:[function(t,e,n){"use strict";cc._RF.push(e,"f69eficxVFGGqoxRvEPXcRV","TurnDirectionMenu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.directions=[],e}return o(e,t),e.prototype.start=function(){},e.prototype.turnByIndex=function(t){for(var e=0;e<this.directions.length;e++)t==e?this.directions[t].active=!0:this.directions[e].active=!1},r([c(cc.Node)],e.prototype,"directions",void 0),e=r([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],WithoutMenu:[function(t,e,n){"use strict";cc._RF.push(e,"99cfffYQ3VOr4fKxTHOUe4M","WithoutMenu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labels=[],e}return o(e,t),e.prototype.start=function(){},e.prototype.updateMenu=function(t,e){this.labels[t].string=this.getWithoutValue(e)},e.prototype.getWithoutValue=function(t){switch(console.log(t),t){case 0:return"\u842c";case 1:return"\u689d";case 2:return"\u7b52"}},r([c(cc.Label)],e.prototype,"labels",void 0),e=r([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],cardZone:[function(t,e,n){"use strict";cc._RF.push(e,"fac89J1U9dMvrE/gY/AxgxH","cardZone");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./unit"),a=t("./Player"),c=t("./AppUtil"),s=cc._decorator,u=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.units=[],e.unitsIdList=[],e}return o(e,t),e.prototype.start=function(){},e.prototype.setCards=function(t){this.unitsIdList=t,this.refreshCards()},e.prototype.refreshCards=function(){this.node.removeAllChildren();for(var t=this.node.parent.parent.getComponent(a.default).playerIndex,e=this.node.parent.parent.getComponent(a.default).prefab,n=0;n<this.unitsIdList.length;n++){var o=c.CardUtil.newCard(e,this.unitsIdList[n],n,t,!1);this.node.addChild(o)}this.units=this.getComponentsInChildren(i.default),c.CardUtil.sortCards(this.unitsIdList,this.units),this.node.children.reverse()},e.prototype.addToHand=function(t){this.unitsIdList.push(t),this.refreshCards()},e.prototype.throwFromHand=function(t){var e=this.unitsIdList,n=this.unitsIdList[t];return e.forEach(function(n,o){o===t&&e.splice(o,1)}),this.refreshCards(),n},e.prototype.searchCardIndex=function(t){for(var e=[],n=0;n<this.unitsIdList.length;n++)t==this.unitsIdList[n]&&e.push(n);return e},e.prototype.pick=function(t){this.units[t].jump()},e.prototype.unpick=function(t){this.units[t].down()},e.prototype.unPickAll=function(){for(var t=0;t<this.units.length;t++)this.units[t].down()},e=r([u],e)}(cc.Component));n.default=p,cc._RF.pop()},{"./AppUtil":"AppUtil","./Player":"Player","./unit":"unit"}],drawZone:[function(t,e,n){"use strict";cc._RF.push(e,"1cd81PStahDOZ0cX/rMHRiu","drawZone");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./unit"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drawUnit=null,e}return o(e,t),e.prototype.start=function(){this.drawUnit=this.node.getChildByName("drawCard").getComponent(i.default)},e.prototype.drawNewCard=function(t){this.drawUnit.set(t)},e.prototype.remove=function(){var t=this.drawUnit.ID;return this.drawNewCard(99),this.drawUnit.down(),t},e.prototype.pick=function(){this.drawUnit.jump()},e.prototype.unpick=function(){this.drawUnit.down()},e=r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./unit":"unit"}],dropItem:[function(t,e,n){"use strict";cc._RF.push(e,"24ba1l1PfNNTpOULnc3pXf+","dropItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./dropMenu"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.set=function(t){this.label.string=t},e.prototype.back=function(){this.node.parent.parent.parent.getComponent(i.default).setShowNode(this.label.string)},r([s(cc.Label)],e.prototype,"label",void 0),e=r([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./dropMenu":"dropMenu"}],dropMenu:[function(t,e,n){"use strict";cc._RF.push(e,"c751c2RpMZEY54zaFvq14lX","dropMenu");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./dropItem"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropNode=null,e.showNode=null,e.prefab=null,e}return o(e,t),e.prototype.start=function(){this.set(["\u6975\u9650\u4e94\u500b\u5b57","\u4e0b\u4e00\u4f4d","789","\u807d\u724c","\u660e\u724c","\u69d3\u7d05\u4e2d","123","456","789","9999","0000"])},e.prototype.set=function(t){this.dropNode.removeAllChildren();for(var e=0;e<t.length;e++){var n=cc.instantiate(this.prefab);n.getComponent(i.default).set(t[e]),this.dropNode.addChild(n)}},e.prototype.setShowNode=function(t){this.showNode.string=t,this.node.active=!1},e.prototype.drop=function(){this.node.active=!0},r([s(cc.Node)],e.prototype,"dropNode",void 0),r([s(cc.Label)],e.prototype,"showNode",void 0),r([s(cc.Prefab)],e.prototype,"prefab",void 0),e=r([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./dropItem":"dropItem"}],dropZone:[function(t,e,n){"use strict";cc._RF.push(e,"c73a6eo/ENB9rDaJv3NZDnK","dropZone");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./unit"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.unHighlightLastCard=function(){var t=this.node.childrenCount;t>0&&this.node.children[t-1].getComponent(i.default).white()},e.prototype.setCards=function(t,e){this.node.removeAllChildren();for(var n=t.length,o=0;o<n;o++)this.addToDrop(t[o]);e&&this.node.children[n-1].getComponent(i.default).blue()},e.prototype.addToDrop=function(t){var e=cc.instantiate(this.prefab);return e.getComponent(i.default).set(t),e.getComponent(i.default).isStacked=!0,this.node.addChild(e),e},r([s(cc.Prefab)],e.prototype,"prefab",void 0),e=r([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./unit":"unit"}],effect:[function(t,e,n){"use strict";cc._RF.push(e,"252beZNcUNIoLKwCsy/bWx8","effect");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.EffectId=void 0;var i,a=cc._decorator,c=a.ccclass,s=a.property;(function(t){t[t.Chi=0]="Chi",t[t.Peng=1]="Peng",t[t.Gang=2]="Gang",t[t.Hu=3]="Hu",t[t.Zm=4]="Zm",t[t.Ting=5]="Ting",t[t.Ming=6]="Ming",t[t.Crit=7]="Crit"})(i=n.EffectId||(n.EffectId={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.img_atlas=null,e.player=[],e}return o(e,t),e.prototype.start=function(){},e.prototype.playEffect=function(t,e){var n=this.player[t];n.opacity=255,n.getComponent(cc.Sprite).spriteFrame=this.img_atlas.getSpriteFrame(i[e]),this.schedule(function(){n.scale+=.2},.1,3),this.schedule(function(){n.opacity-=50},.1,10,.1),n.scale=1},r([s(cc.SpriteAtlas)],e.prototype,"img_atlas",void 0),r([s(cc.Node)],e.prototype,"player",void 0),e=r([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],flowerZone:[function(t,e,n){"use strict";cc._RF.push(e,"55339DGw8xFWIm2VWaOJxu1","flowerZone");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./unit"),a=t("./Player"),c=t("./AppUtil"),s=cc._decorator,u=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.units=[],e.unitsIdList=[],e}return o(e,t),e.prototype.start=function(){},e.prototype.setCards=function(t){this.unitsIdList=t,this.refreshCards()},e.prototype.refreshCards=function(){this.node.removeAllChildren();for(var t=this.node.parent.getComponent(a.default).playerIndex,e=this.node.parent.getComponent(a.default).prefab,n=0;n<this.unitsIdList.length;n++){var o=c.CardUtil.newCard(e,this.unitsIdList[n],n,t,!1);this.node.addChild(o)}this.units=this.getComponentsInChildren(i.default),c.CardUtil.sortCards(this.unitsIdList,this.units),this.node.children.reverse()},e.prototype.addToFlower=function(t){this.unitsIdList.push(t),this.refreshCards()},e=r([u],e)}(cc.Component));n.default=p,cc._RF.pop()},{"./AppUtil":"AppUtil","./Player":"Player","./unit":"unit"}],game:[function(t,e,n){"use strict";cc._RF.push(e,"785ba1xQU9DLqd0GEM9xJrB","game");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,o){function r(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):r(t.value).then(a,c)}s((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./effect"),s=t("./effect"),u=t("./InteractionMenu"),p=t("./SelectChowMenu"),l=t("./SelectKongMenu"),d=t("./SelectWithoutMenu"),h=t("./ChangeThreeTileMenu"),f=t("./WithoutMenu"),y=t("./GameOverMenu"),g=t("./SettlementMenu"),v=t("./SocketDataHandler/ServerDataResolver"),C=t("./SocketDataHandler/ClientDataCreator"),m=t("./TurnDirectionMenu"),_=t("./Player"),w=t("./SocketDataHandler/DataSchema"),b=t("./AppUtil"),S=cc._decorator,I=S.ccclass,O=S.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgAtlas=null,e.openGameButton=null,e.players=[],e.preGameMenu=null,e.interactionMenu=null,e.selectChowMenu=null,e.selectKongMenu=null,e.selectWithoutMenu=null,e.changeThreeTileMenu=null,e.withoutMenu=null,e.gameOverMenu=null,e.gameDirection=null,e.turnDirectionMenu=null,e.cardCount=null,e.settlementMenu=null,e.effectUI=null,e.soundVolume=.5,e.webSocket=null,e.userPlayerData=null,e.userplayerServerIndex=-1,e.playerMap=new Map,e.isGameOver=!1,e.isSelfHu=!1,e.g_playerNow=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.startGame=function(){this.webSocket.send(C.default.createDealTilesData()),this.openGameButton.active=!1,this.preGameMenu.active=!0},e.prototype.onLoad=function(){var t=window.webSocket;this.webSocket=t,this.players[0].webSocket=t,this.configWebSocket(),this.setPlayerId(),cc.debug.setDisplayStats(!1)},e.prototype.setPlayerId=function(){this.players[0].playerId=window.playerId;for(var t=1;t<4;t++)this.players[t].playerId="Bot"+t},e.prototype.configWebSocket=function(){var t=this;this.webSocket.onmessage=function(e){var n=JSON.parse(e.data),o=v.default.getServerData(n);console.log("server data = ",o),o.isGameInit()?t.initGame(o):o.isPreGameStage()?t.preGameStage(o):(t.isGameOver=o.isGameOver(),t.demoPlays(o),t.updateGameBoard(o),t.isGameOver?t.gameOverMenu.show():t.userPlayerPhase(o))}},e.prototype.initGame=function(t){this.initGameUi(t.GameRule),this.initPlayerMap(t.RealPlayer),this.setGameDirection(t.PrevailingWind),this.setPlayerHands(t.Players)},e.prototype.initGameUi=function(t){this.interactionMenu.initButtons(b.UiUtil.initAvailableInteractions(t))},e.prototype.initPlayerMap=function(t){console.log("playerMap initail");for(var e=0;e<4;e++){var n=this.getRealPlayerIndex(t,e);console.log("serverIndex = %d , clientIndex = %d",n,e);var o=this.players[e];o.playerServerIndex=n,this.playerMap.set(n,o)}this.userplayerServerIndex=t},e.prototype.getRealPlayerIndex=function(t,e){var n=e+t;return 4<=n?n-4:n},e.prototype.setGameDirection=function(t){this.gameDirection.spriteFrame=this.getWindSprite(t)},e.prototype.getWindSprite=function(t){return 27==t?this.imgAtlas.getSpriteFrame("MahjongVal_101_@2x"):28==t?this.imgAtlas.getSpriteFrame("MahjongVal_103_@2x"):29==t?this.imgAtlas.getSpriteFrame("MahjongVal_105_@2x"):30==t?this.imgAtlas.getSpriteFrame("MahjongVal_107_@2x"):null},e.prototype.setPlayerHands=function(t){for(var e=0;e<t.length;e++)this.updateHand(e,t[e])},e.prototype.updateHand=function(t,e){var n=this.playerMap.get(t);n.setCardZone(e.HandTiles),n.drawZone.remove()},e.prototype.preGameStage=function(t){switch(t.GameState){case w.GameState.StateWithoutTiles:this.updateWithouts(t.Players);break;case w.GameState.StateChangeTiles:this.updateChangeThreeTiles(t.Players)}},e.prototype.demoPlays=function(t){console.log("demoPlays");var e=t.PlayerNow,n=t.Players[e],o=this.playerMap.get(e);this.g_playerNow=o,this.isSelfHu=t.DoAction.Action==w.ActionId[w.ActionId.SelfHu];var r=t.DoAction.Action==w.ActionId[w.ActionId.Hu]||t.DoAction.Action==w.ActionId[w.ActionId.SelfHu];switch(this.updateDrawTile(o,n.OnDrawTile,r),this.updateFlowers(o,n.FlowerTiles),t.GameState){case w.GameState.StateDiscard:this.discard(n,o,t.OntableTile);break;case w.GameState.StateAction:this.demoActions(t)}},e.prototype.updateDrawTile=function(t,e,n){return i(this,void 0,void 0,function(){return a(this,function(o){switch(o.label){case 0:return-1==e?[2]:[4,b.AppUtil.sleep(500)];case 1:return o.sent(),this.draw(t,e),[4,b.AppUtil.sleep(500)];case 2:return o.sent(),n||0==t.playerIndex||this.webSocket.send(C.default.createAIDiscardTileData(this.players[0].playerId,t.playerServerIndex)),[2]}})})},e.prototype.draw=function(t,e){console.log("Player: %d draw: %d",t.playerIndex,e),t.draw(e)},e.prototype.updateFlowers=function(t,e){null!=e&&0!=e.length&&t.setFlowers(e)},e.prototype.updateWithouts=function(t){for(var e=0;e<4;e++){var n=this.playerMap.get(e),o=t[e];this.selectWithout(n,o.WithoutTile)}},e.prototype.updateChangeThreeTiles=function(t){for(var e=0;e<4;e++){var n=this.playerMap.get(e),o=t[e];this.changeThreeTiles(o,n)}},e.prototype.discard=function(t,e,n){console.log("Player: %d discard: %d",e.playerIndex,n);for(var o=0;o<4;o++)this.players[o].dropZone.unHighlightLastCard();e.refreshCardZone(t.DiscardTiles,t.HandTiles)},e.prototype.demoActions=function(t){var e=t.DoAction,n=this.playerMap.get(e.Player),o=t.Players[e.Player],r=e.PriviousPlayer,i=t.Players[r],a=this.playerMap.get(r);if(null!=e.Tiles)switch(this.updatePreviousPlayer(i,a),console.log("Player: %d demoAction: %s",n.playerIndex,e.Action),e.Action){case w.ActionId[w.ActionId.Buhua]:this.buhua();break;case w.ActionId[w.ActionId.Chow]:this.chow(o,n,e.Tiles);break;case w.ActionId[w.ActionId.Pong]:this.pong(o,n,e.Tiles[0]);break;case w.ActionId[w.ActionId.ExposedKong]:this.kong(o,n,e.Tiles[0]);break;case w.ActionId[w.ActionId.ConcealedKong]:this.concealedKong(o,n,e.Tiles[0]);break;case w.ActionId[w.ActionId.AddKong]:this.addKong(o,n,e.Tiles[0]);break;case w.ActionId[w.ActionId.Hu]:this.hu(this.players,t.Players);break;case w.ActionId[w.ActionId.SelfHu]:this.selfDrawn(this.players,t.Players)}},e.prototype.updatePreviousPlayer=function(t,e){e.dropZone.setCards(t.DiscardTiles,!1)},e.prototype.buhua=function(){},e.prototype.changeThreeTiles=function(t,e){e.setCardZone(t.HandTiles)},e.prototype.selectWithout=function(t,e){this.withoutMenu.updateMenu(t.playerIndex,e)},e.prototype.chow=function(t,e,n){this.effectUI.playEffect(e.playerIndex,s.EffectId.Chi),e.chow(n,t.HandTiles)},e.prototype.pong=function(t,e,n){this.effectUI.playEffect(e.playerIndex,s.EffectId.Peng),e.pong(n,t.HandTiles)},e.prototype.kong=function(t,e,n){this.effectUI.playEffect(e.playerIndex,s.EffectId.Gang),e.kong(n,t.HandTiles)},e.prototype.concealedKong=function(t,e,n){this.effectUI.playEffect(e.playerIndex,s.EffectId.Gang),e.kong(n,t.HandTiles)},e.prototype.addKong=function(t,e,n){this.effectUI.playEffect(e.playerIndex,s.EffectId.Gang),e.addKong(n,t.HandTiles)},e.prototype.hu=function(t,e){this.effectUI.playEffect(0,s.EffectId.Hu),this.settlementMenu.settles(t,e),this.settlementMenu.show()},e.prototype.selfDrawn=function(t,e){this.effectUI.playEffect(0,s.EffectId.Zm),this.settlementMenu.settles(t,e),this.settlementMenu.show()},e.prototype.ting=function(t){this.effectUI.playEffect(t,s.EffectId.Ting)},e.prototype.ming=function(t){this.effectUI.playEffect(t,s.EffectId.Ming)},e.prototype.crit=function(t){this.effectUI.playEffect(t,s.EffectId.Crit)},e.prototype.updateGameBoard=function(t){this.updateCardCount(t.TilesSea.length),this.updateturnDirection(this.playerMap.get(t.PlayerNow).playerIndex),this.updatePoint(t.Players)},e.prototype.updateCardCount=function(t){this.cardCount.string=String(t)},e.prototype.updateturnDirection=function(t){this.turnDirectionMenu.turnByIndex(t)},e.prototype.updatePoint=function(t){for(var e=0;e<t.length;e++){var n=this.playerMap.get(e),o=t[e];n.point=o.Point}},e.prototype.userPlayerPhase=function(t){var e=t.isUserPlayerThrow();this.updateUserLock(e),this.userPlayerData=t.Players[this.userplayerServerIndex],this.showInteractionMenu(this.getInteractions(t),e,t.isDiscardTile())},e.prototype.showInteractionMenu=function(t,e,n){0!=t.length||e||!n?(console.log("showInteractions: ",t),this.interactionMenu.showByIndex(t,this.isCancelable(t,e))):this.webSocket.send(C.default.createNothingData(this.userplayerServerIndex))},e.prototype.isCancelable=function(t,e){return!e&&this.isInteractionCancelable(t)},e.prototype.isInteractionCancelable=function(t){return!t.includes(w.ActionId.Buhua)||!t.includes(w.ActionId.SelectWithout)},e.prototype.getInteractions=function(t){var e=[],n=t.GameState,o=t.Players[t.RealPlayer];return n==w.GameState.StateBuHua&&e.push(w.ActionId.Buhua),o.CanChow&&e.push(w.ActionId.Chow),o.CanPon&&e.push(w.ActionId.Pong),o.CanKong&&e.push(w.ActionId.ExposedKong),o.CanConcealedKong&&e.push(w.ActionId.ConcealedKong),o.CanAddKong&&e.push(w.ActionId.AddKong),o.CanHu&&e.push(w.ActionId.Hu),o.CanSelfHu&&e.push(w.ActionId.SelfHu),e},e.prototype.updateUserLock=function(t){t?this.players[0].wakeUp():this.players[0].sleep()},e.prototype.createWithoutList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},e.prototype.volumeSet=function(t){this.soundVolume=t.progress},e.prototype.preGameButtonOpenGame=function(){this.webSocket.send(C.default.createOpenGameData()),this.preGameMenu.active=!1},e.prototype.preGameButtonSelectWithout=function(){this.preGameMenu.active=!1,this.selectWithoutMenu.show()},e.prototype.userSelectWithout=function(t,e){this.webSocket.send(C.default.createSelectWithoutData(Number(e),this.userplayerServerIndex)),this.selectWithoutMenu.hide(),this.preGameMenu.active=!0},e.prototype.preGameButtonChangeThreeTile=function(){this.players[0].pickMultipleCardLimit=3,this.updateUserLock(!0),this.preGameMenu.active=!1,this.changeThreeTileMenu.show()},e.prototype.decideChangeThreeTile=function(){this.updateUserLock(!1);var t=this.players[0].getMultiPickedCards();this.webSocket.send(C.default.createChangeThreeTilesData(t,this.playerMap.entries().next().value[0])),this.changeThreeTileMenu.hide(),this.preGameMenu.active=!0},e.prototype.interactionButtonCancel=function(){this.webSocket.send(C.default.createNothingData(this.userplayerServerIndex)),this.interactionMenu.hide()},e.prototype.interactionButtonChow=function(){this.interactionMenu.hide(),this.selectChowMenu.showChowOptions(this.userPlayerData.CanChowSet)},e.prototype.chowOption=function(t,e){this.webSocket.send(C.default.createChowData(this.userPlayerData.CanChowSet[Number(e)],this.userplayerServerIndex)),this.selectChowMenu.hide()},e.prototype.interactionButtonPong=function(){this.webSocket.send(C.default.createPongData(this.userPlayerData.CanPonSet,this.userplayerServerIndex)),this.interactionMenu.hide()},e.prototype.interactionButtonKong=function(){this.interactionMenu.hide(),this.selectKongMenu.showKongOptions(this.userPlayerData.CanKongSet,!1)},e.prototype.kongOption=function(t,e){this.webSocket.send(C.default.createKongData(this.userPlayerData.CanKongSet[Number(e)],this.userplayerServerIndex)),this.selectKongMenu.hide()},e.prototype.interactionButtonConcealedKong=function(){this.interactionMenu.hide(),this.selectKongMenu.showKongOptions(this.userPlayerData.CanConcealedKongSet,!0)},e.prototype.concealedKongOption=function(t,e){this.webSocket.send(C.default.createConcealedKongData(this.userPlayerData.CanConcealedKongSet[Number(e)],this.userplayerServerIndex)),this.selectKongMenu.hide()},e.prototype.interactionButtonAddKong=function(){this.webSocket.send(C.default.createAddKongData(this.userPlayerData.CanAddKongSet,this.userplayerServerIndex)),this.interactionMenu.hide()},e.prototype.interactionButtonTin=function(){},e.prototype.interactionButtonHu=function(){this.webSocket.send(C.default.createHuData(this.userPlayerData.CanHuTile,this.userplayerServerIndex)),this.interactionMenu.hide()},e.prototype.interactionButtonSelfHu=function(){this.webSocket.send(C.default.createSelfHuData(this.userPlayerData.CanSelfHuTile,this.userplayerServerIndex)),this.interactionMenu.hide()},e.prototype.interactionButtonCrit=function(){},e.prototype.interactionButtonMing=function(){},e.prototype.interactionButtonAddFlower=function(){},e.prototype.selectChiMenuButtonCancel=function(){this.selectChowMenu.hide(),this.interactionMenu.show()},e.prototype.selectKongMenuButtonCancel=function(){this.selectKongMenu.hide(),this.interactionMenu.show()},e.prototype.closeSettelmentLayer=function(){this.isGameOver||(0!=this.g_playerNow.playerIndex?this.isSelfHu?(this.webSocket.send(C.default.createAIDiscardTileData(this.players[0].playerId,this.g_playerNow.playerServerIndex)),this.g_playerNow.throwCard()):this.webSocket.send(C.default.createNothingData(this.userplayerServerIndex)):(this.isSelfHu&&this.g_playerNow.throwCard(),this.webSocket.send(C.default.createNothingData(this.userplayerServerIndex)))),this.settlementMenu.hide()},e.prototype.test=function(){this.players[0].setCardZone([0,1,2,3,4,5,6,7,8,9,39]),this.players[0].draw(40),this.players[0].setFlowers([34,35,36,37,38,39,40,41]),this.players[1].setCardZone([0,1,2,3,4,5,6,7,8,9,39]),this.players[1].draw(40),this.players[1].setFlowers([34,35,36,37,38,39,40,41]),this.players[2].setCardZone([0,1,2,3,4,5,6,7,8,9,39]),this.players[2].draw(40),this.players[2].setFlowers([34,35,36,37,38,39,40,41]),this.players[3].setCardZone([0,1,2,3,4,5,6,7,8,9,39]),this.players[3].draw(40),this.players[3].setFlowers([34,35,36,37,38,39,40,41])},e.prototype.test3=function(){this.players[0].throwCard()},r([O(cc.SpriteAtlas)],e.prototype,"imgAtlas",void 0),r([O(cc.Node)],e.prototype,"openGameButton",void 0),r([O(_.default)],e.prototype,"players",void 0),r([O(cc.Node)],e.prototype,"preGameMenu",void 0),r([O(u.default)],e.prototype,"interactionMenu",void 0),r([O(p.default)],e.prototype,"selectChowMenu",void 0),r([O(l.default)],e.prototype,"selectKongMenu",void 0),r([O(d.default)],e.prototype,"selectWithoutMenu",void 0),r([O(h.default)],e.prototype,"changeThreeTileMenu",void 0),r([O(f.default)],e.prototype,"withoutMenu",void 0),r([O(y.default)],e.prototype,"gameOverMenu",void 0),r([O(cc.Sprite)],e.prototype,"gameDirection",void 0),r([O(m.default)],e.prototype,"turnDirectionMenu",void 0),r([O(cc.Label)],e.prototype,"cardCount",void 0),r([O(g.default)],e.prototype,"settlementMenu",void 0),r([O(c.default)],e.prototype,"effectUI",void 0),e=r([I],e)}(cc.Component);n.default=P,cc._RF.pop()},{"./AppUtil":"AppUtil","./ChangeThreeTileMenu":"ChangeThreeTileMenu","./GameOverMenu":"GameOverMenu","./InteractionMenu":"InteractionMenu","./Player":"Player","./SelectChowMenu":"SelectChowMenu","./SelectKongMenu":"SelectKongMenu","./SelectWithoutMenu":"SelectWithoutMenu","./SettlementMenu":"SettlementMenu","./SocketDataHandler/ClientDataCreator":"ClientDataCreator","./SocketDataHandler/DataSchema":"DataSchema","./SocketDataHandler/ServerDataResolver":"ServerDataResolver","./TurnDirectionMenu":"TurnDirectionMenu","./WithoutMenu":"WithoutMenu","./effect":"effect"}],lobby:[function(t,e,n){"use strict";cc._RF.push(e,"7c5f0LcQHlDPKCyPSaE6cws","lobby");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,o){function r(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):r(t.value).then(a,c)}s((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./SocketDataHandler/ClientDataCreator"),s=t("./SocketDataHandler/ServerDataResolver"),u=t("./AppUtil"),p=cc._decorator,l=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.idTextBox=null,e.ipTextBox=null,e.portTextBox=null,e.connectInfoLabel=null,e.roomIdLabel=null,e.connectButton=null,e.startButton=null,e.gameModToggles=null,e.aiTestRounds=null,e.webSocket=null,e.dataResolver=null,e.gameMode=0,e.defaultAddress="ws://140.118.157.29:1234",e}return o(e,t),e.prototype.getSocketAddress=function(t,e){return""!==t&&""!==e?"ws://"+t+":"+e:this.defaultAddress},e.prototype.chooseGameMode=function(){for(var t=this.gameModToggles.toggleItems,e=0;e<t.length;e++)if(t[e].isChecked){this.gameMode=e;break}console.log("choose game mode : "+this.gameMode)},e.prototype.getGameModeData=function(){switch(this.gameMode){case 0:return"8Joker";case 1:return"46Joker";case 2:return"bloodBattle";case 3:return"TaiwanMJ"}},e.prototype.creteWebSocket=function(t,e){var n=this,o=new WebSocket(this.getSocketAddress(t,e));return o.addEventListener("open",function(){console.log("socket connected")}),o.onmessage=function(t){var e=s.default.getServerData(t.data);console.log("server data = ",e);var o=e.RoomId;n.roomIdLabel.string=String(o),window.RoomID=o},o},e.prototype.connectToServer=function(){return i(this,void 0,void 0,function(){var t,e,n=this;return a(this,function(o){switch(o.label){case 0:this.webSocket=this.creteWebSocket(this.ipTextBox.string,this.portTextBox.string),this.connectInfoLabel.string="Connecting...",t=0,e=5,o.label=1;case 1:return!this.isSocketConneted()&&t<e?[4,u.AppUtil.sleep(1e3)]:[3,3];case 2:return o.sent(),t++,[3,1];case 3:return console.log("counter = ",t),t==e?(this.connectInfoLabel.string="Connection fail, please try again",[2]):(this.connectInfoLabel.string="Connection success!",setTimeout(function(){n.webSocket.send(c.default.createConnectionData())},100),setTimeout(function(){n.webSocket.send(c.default.createCreateRoomData(n.getPlayerId(),n.getGameModeData()))},100),[2])}})})},e.prototype.isSocketConneted=function(){if(null==this.webSocket)return!1;var t=this.webSocket.readyState;return console.log("socket status = ",WebSocket[t]),t==WebSocket.OPEN},e.prototype.gameStart=function(){if(this.isSocketConneted()){var t=this.getPlayerId();window.playerId=t,window.webSocket=this.webSocket,cc.director.loadScene("game")}else this.connectInfoLabel.string="Not connected to server, please try connect first!"},e.prototype.getPlayerId=function(){return""!==this.idTextBox.string?this.idTextBox.string:"\u73a9\u5bb6"},e.prototype.aiTestButton=function(){this.webSocket.send(c.default.createAITestData(Number(this.aiTestRounds.string),this.getGameModeData()))},e.prototype.start=function(){},r([d(cc.EditBox)],e.prototype,"idTextBox",void 0),r([d(cc.EditBox)],e.prototype,"ipTextBox",void 0),r([d(cc.EditBox)],e.prototype,"portTextBox",void 0),r([d(cc.Label)],e.prototype,"connectInfoLabel",void 0),r([d(cc.Label)],e.prototype,"roomIdLabel",void 0),r([d(cc.Button)],e.prototype,"connectButton",void 0),r([d(cc.Button)],e.prototype,"startButton",void 0),r([d(cc.ToggleContainer)],e.prototype,"gameModToggles",void 0),r([d(cc.EditBox)],e.prototype,"aiTestRounds",void 0),e=r([l],e)}(cc.Component);n.default=h,cc._RF.pop()},{"./AppUtil":"AppUtil","./SocketDataHandler/ClientDataCreator":"ClientDataCreator","./SocketDataHandler/ServerDataResolver":"ServerDataResolver"}],stackZone:[function(t,e,n){"use strict";cc._RF.push(e,"20b20fh7HVAG4wo91ndNsHv","stackZone");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./unit"),a=t("./Player"),c=t("./AppUtil"),s=cc._decorator,u=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chowList=[],e.pongList=[],e.kongList=[],e.concealKongList=[],e.units=[],e.unitsIdList=[],e}return o(e,t),e.prototype.start=function(){},e.prototype.addChow=function(t){var e;console.log("addChow"),(e=this.chowList).push.apply(e,t),c.CardUtil.sortCardIdList(this.chowList),this.refreshStackZone()},e.prototype.addPong=function(t){console.log("addPong"),this.pongList.push(t),c.CardUtil.sortCardIdList(this.pongList),this.refreshStackZone()},e.prototype.removePong=function(t){var e=this.pongList.indexOf(t,0);this.pongList.splice(e,1),c.CardUtil.sortCardIdList(this.pongList),this.refreshStackZone()},e.prototype.addKong=function(t){console.log("addKong"),this.kongList.push(t),c.CardUtil.sortCardIdList(this.kongList),this.refreshStackZone()},e.prototype.addConcealKong=function(t){console.log("addConcealKong"),this.concealKongList.push(t),c.CardUtil.sortCardIdList(this.concealKongList),this.refreshStackZone()},e.prototype.refreshStackZone=function(){this.node.removeAllChildren();var t=this.node.parent.parent.getComponent(a.default).playerIndex,e=this.node.parent.parent.getComponent(a.default).prefab;this.createChowCards(e,t),this.createPongCards(e,t),this.createKongCards(e,t)},e.prototype.createChowCards=function(t,e){for(var n=0;n<this.chowList.length;n++){var o=c.CardUtil.newCard(t,this.chowList[n],n,e,!0);o.getComponent(i.default).jump(),this.node.addChild(o)}},e.prototype.createPongCards=function(t,e){for(var n=0,o=0;o<this.pongList.length;o++)for(var r=0;r<3;r++){var a=c.CardUtil.newCard(t,this.pongList[o],n,e,!0);a.getComponent(i.default).jump(),this.node.addChild(a),n++}},e.prototype.createKongCards=function(t,e){for(var n=0,o=0;o<this.kongList.length;o++)for(var r=0;r<3;r++){var a=c.CardUtil.newCard(t,this.kongList[o],n,e,!0);a.getComponent(i.default).jump(),1==r&&a.getComponent(i.default).stack(),this.node.addChild(a),n++}},e=r([u],e)}(cc.Component));n.default=p,cc._RF.pop()},{"./AppUtil":"AppUtil","./Player":"Player","./unit":"unit"}],unit:[function(t,e,n){"use strict";cc._RF.push(e,"2618bJUDAhJdoZxUgFsbdOQ","unit");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=t("./Player"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Mahjongs=null,e.player=0,e.index=0,e.isStacked=!1,e.ID=0,e.air=!1,e.isPicked=!1,e.isMerged=!1,e}return o(e,t),e.prototype.start=function(){var t=this;0==t.player&&t.node.on(cc.Node.EventType.MOUSE_DOWN,function(){var e=t.node.parent.parent.parent.getComponent(s.default);null!=e&&e.isInteractable&&!t.isStacked&&t.node.parent.parent.parent.getComponent(s.default).pick(t.index)})},e.prototype.jump=function(){switch(this.isPicked=!0,this.player){case 3:this.node.x+=20;break;case 2:this.node.y-=20;break;case 1:this.node.x-=20;break;case 0:this.node.y=20}},e.prototype.down=function(){this.isPicked=!1,this.node.y=0},e.prototype.set=function(t){var e;this.node.getComponent(cc.Sprite).spriteFrame!=this.Mahjongs.getSpriteFrame("mingmah_00")&&(this.ID=t,e=0!=this.player||this.isStacked?"mingmah_"+t:"handmah_"+t,this.node.getComponent(cc.Sprite).spriteFrame=this.Mahjongs.getSpriteFrame(e))},e.prototype.stack=function(){var t=new cc.Node;switch(t.addComponent(cc.Sprite),this.player){case 0:t.y+=30;break;case 1:t.y+=15,t.scale=.58;break;case 2:t.y=25,t.setScale(.85,.75);break;case 3:t.y+=15,t.scale=.58}this.player=3,this.set(this.ID),t.getComponent(cc.Sprite).spriteFrame=this.node.getComponent(cc.Sprite).spriteFrame,this.node.addChild(t)},e.prototype.white=function(){this.node.color=new cc.Color(255,255,255,255)},e.prototype.blue=function(){this.node.color=new cc.Color(160,230,255,255)},e.prototype.back=function(){this.node.getComponent(cc.Sprite).spriteFrame=this.Mahjongs.getSpriteFrame("mingmah_00")},r([c(cc.SpriteAtlas)],e.prototype,"Mahjongs",void 0),r([c],e.prototype,"player",void 0),r([c],e.prototype,"index",void 0),e=r([a],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./Player":"Player"}]},{},["AppUtil","ChangeThreeTileMenu","GameOverMenu","InteractionMenu","Player","SelectChowMenu","SelectKongMenu","SelectWithoutMenu","SettlementMenu","SettlementZone","ClientDataCreator","DataSchema","ServerDataResolver","TurnDirectionMenu","WithoutMenu","cardZone","drawZone","dropItem","dropMenu","dropZone","effect","flowerZone","game","lobby","stackZone","unit"]);